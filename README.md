# group_recommender
### Как я понимаю что происходит в алгоритме [отсюда](https://arxiv.org/pdf/1003.0146.pdf)
[здесь ещё тоже хорошо описано все](http://john-maxwell.com/post/2017-03-17/)

[здесь зашаренные данные Yahoo! и вопросы](https://drive.google.com/drive/u/0/folders/1bIyBK46vWbA93lGapWnR8mv0B1gHQaNQ)
Я вопросы писал давно (где-то в пт 25.01). Это даже не вопросы, а мои рассуждения в live-режиме так сказать. До некоторых штук я вроде бы допер и описал здесь, но некоторые, возможно, остались без внимания, либо я не так понял их и тут уже написал не совсем правильно.

У нас есть 2 вида контекстов:
* контекст по пользователям
* контекст по группам 

### Как мы ими распоряжаемся

Контекст по пользователям используется непосредственно при подсчете *выплат* для рук при определении какую из них выдать пользователю, а также при обновлении матрицы соответствующей группы если результат выдачи совпал с выбором пользователя (строчки **8**, **9**, и, если все хорошо, то **12**, **13** из **Algortithm 1** (переменная *x_t_a*)). Меня смущает индекс а у переменной *x_t_a*. Я вот видимо не совсем догоняю как зависит контекст какого-то пользователя (если, конечно по *x_t_a* подразумевается пользователь) от руки?

С контекстом по группам интереснее. Опять же, исходя из статьи, они предлагают в качестве матрицы *D_a* использовать уже ранее полученные наблюдения с контекстами пользователей (например, вот есть *m* пользователей, которые кликнули на группу, и каждый описан вектором размерности *d*.И предлагается из этой матрицы получить матрицу размерности *d* на *d* транспонированием и соответвствующим умножением и дальше уже ее использовать в гребневой регрессии и т.д.).

Если же таковых нет, т.е. группа (в их случае статья) не встречалась, то вот эту матрицу сделать просто единичной и дальше проводить расчёты согласно алгоритма. 

Но, как я понял, в нашем случае у каждой группы уже есть какой-то заранее подсчитанный контекст в виде как раз вот того набора данных по группам. И хочется вот ту матрицу получить из этого вектора, а не просто использовать скучную единичную матрицу. 

Если же с контекстом группы тоже беда (например, группа новая или малоактивная), то тогда остается только использовать единичную матрицу.

### Использование фичей от групп и пользователей

#### Что я хочу использовать по статьям

Ну собственно все, что есть, кроме распределений (я хз как их туда прикрутить). И  ещё количество семплов при построении LDA тоже не знаю как можно использовать, и нужно ли оно вообще.

#### Что я хочу использовать по пользователям 

Как минимум все то, что есть у групп и может быть ещё что-то - в связи с этим есть вопрос дальше внизу по фичам пользователей.

### Идеи по проверке работоспособности

Как я уже говорил, у меня все подает по памяти уже на этапе инициализации (у меня трехмерная матрица для групп получается размерности 33578 на 400 с копейками на 400 с копейками и ему(ноуту) уже сложно хранить столько единичных матриц, не говоря уже про их обращения)

Я хотел попробоавать запустить на небольшой выборке групп, скажем 100 - 200 штук. И для наглядности хочу выбрать эти группы так, чтобы их суммарное количество показов пользователям было максимальным. Я уже пробовал выбрать 200 **случайных** групп и у меня получалось порядка 60 000 событий, чего, наверное, для проверки жизнеспособности должно хватить. На максимальных 200 группах будет, я думаю порядка 100 000 - 150 000 показов.
**UPD:** я угадал - получилось 159076 записей.

Надеюсь ничего в таком случае не упадет и будет работать разумное количество времени.


### Неразрешенные вопросы (может обновляться)

* Что делать с *r_t* из статьи (real-time payoff)? Есть два варианта: либо мы штрафуем за ошибки, и тогда *r_t* берется из {-1, 1}. Либо мы более гуманно относимся к этому, и тогда *r_t* уже из {0, 1}. (Логичнее было бы штрафовать, наверное, но тогда может оказаться, что мы одну группу может довольно сильно *загнобить* и она уже никому никогда не всплывет...)

* Можешь, пожалуйста, пояснить некоторые столбцы в данных о пользователях (которые *view*): classifierWeight, pos и sw?
